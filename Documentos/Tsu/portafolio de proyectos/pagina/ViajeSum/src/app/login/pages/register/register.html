<div class="register-container">
    <h2>Registro</h2>
    <form (ngSubmit)="onSubmit(registerForm)" #registerForm="ngForm">
        <label for="username">Nombre de usuario:</label>
        <input type="text" id="username" name="username" ngModel required>
        <div *ngIf="registerForm.submitted && registerForm.controls['username']?.errors?.['required']">
            <p class="error">El nombre de usuario es obligatorio.</p>
        </div>

        <label for="password">Contraseña:</label>
        <input type="password" id="password" name="password" ngModel 
               #password="ngModel" 
               minlength="8" 
               pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$" 
               required>
        <div *ngIf="password.invalid && password.touched">
            <p class="error" *ngIf="password.errors?.['required']">La contraseña es obligatoria.</p>
            <p class="error" *ngIf="password.errors?.['minlength']">La contraseña debe tener al menos 8 caracteres.</p>
            <p class="error" *ngIf="password.errors?.['pattern']">
                La contraseña debe contener al menos una letra mayúscula, una letra minúscula, un número y un carácter especial.
            </p>
        </div>

        <label for="confirmPassword">Repetir Contraseña:</label>
        <input type="password" id="confirmPassword" name="confirmPassword" ngModel #confirmPassword="ngModel" required>
        <div *ngIf="confirmPassword.touched && confirmPassword.value !== password.value">
            <p class="error">Las contraseñas no coinciden.</p>
        </div>

        <button routerLink="/login" type="submit" [disabled]="registerForm.invalid || confirmPassword.value !== password.value">Registrar</button>
    </form>
    <p>{{ message }}</p>
</div>
